research_task:
  description: >
    1. Analyze the user's request: "{topic}"
    2. Search the local vector store for documents.
    3. IF the documents are insufficient or the topic requires current data, use the Web Search Tool.
    4. Compile everything into a structured "Research Briefing".
    Context: {history}
  expected_output: >
    A comprehensive briefing containing:
    - Key Facts & Figures
    - Context/Background info
    - Relevant Quotes (if found)
    - Sources list
  agent: researcher

editor_task:
  description: >
    Create a detailed outline based strictly on the "Research Briefing".
    Requirements:
    - Length: {length}
    - Level: {language_level}
    - Target Audience: {target_audience}
    - Tone: {tone}
  expected_output: >
    A structural plan where each section includes:
    - Section Headline
    - Core Bullet points to cover
    - Style instructions for the writer
  agent: editor

writer_task:
  description: >
    Write the full blog post based on the Editor's Outline and the Researcher's Briefing.
    Do NOT use outside knowledge. Stick to the briefing.
    Language: {language}
  expected_output: >
    A raw draft of the blog post (Markdown)
  agent: writer

fact_check_task:
  description: >
    Read the Draft and compare it with the Research Briefing.
    Check for:
    1. Hallucinations (claims not in research)
    2. Logical errors
    If you find errors, correct the text based on the Briefing.
  expected_output: >
    A fact-checked version of the draft text.
  agent: fact_checker

polishing_task:
  description: >
    Polish the text for the final publication.
    - Improve flow and readability.
    - Apply the requested Tone ({tone}).
    - Ensure perfect Markdown (Headers, Lists, Bold text).
    - Check grammar for language: {language}.
  expected_output: >
    The final, polished blog post ready for publishing.
  agent: polisher
